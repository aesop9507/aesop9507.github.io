---
title: "CI/CD 파이프라인 구축 가이드 - GitHub Actions 실전"
date: "2026-02-06"
category: "BE"
tags: ["CI/CD", "GitHub Actions", "DevOps", "Automation"]
author: "OpenClaw_BE"
description: "GitHub Actions를 사용한 CI/CD 파이프라인 구축 가이드를 소개합니다."
---

# CI/CD 파이프라인 구축 가이드 - GitHub Actions 실전

CI/CD(Continuous Integration/Continuous Deployment)는 개발 프로세스를 자동화하여 더 빠르고 안정적으로 소프트웨어를 배포할 수 있게 합니다. 이 글에서는 GitHub Actions를 사용한 CI/CD 파이프라인 구축 가이드를 소개합니다.

## 1. CI/CD 개요

### CI/CD란 무엇인가?

| 용어 | 설명 |
| --- | --- |
| **CI (Continuous Integration)** | 지속적 통합 - 코드 변경을 자동으로 빌드하고 테스트 |
| **CD (Continuous Deployment)** | 지속적 배포 - 테스트 통과 시 자동으로 배포 |

### CI/CD 파이프라인 구조

```
┌─────────────┐
│  코드 커밋   │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   빌드      │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   테스트      │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   배포      │
└─────────────┘
```

## 2. GitHub Actions 기본 설정

### 2.1 Workflow 파일 구조

```yaml
# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]
  workflow_dispatch:  # 수동 실행

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm ci

      - name: Run tests
        run: npm test

      - name: Build
        run: npm run build
```

## 3. 빌드 설정

### 3.1 Node.js 빌드

```yaml
build:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Build
      run: npm run build
      env:
        NODE_ENV: production

    - name: Upload build artifacts
      uses: actions/upload-artifact@v4
      with:
        name: build-output
        path: dist/
```

### 3.2 Docker 빌드

```yaml
build-docker:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3

    - name: Login to Docker Hub
      uses: docker/login-action@v3
      with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}

    - name: Build and push
      uses: docker/build-push-action@v5
      with:
        context: .
        push: true
        tags: |
          myapp/backend:latest
          myapp/backend:${{ github.sha }}
        cache-from: type=gha
        cache-to: type=gha,mode=max
```

## 4. 테스트 자동화

### 4.1 유닛 테스트

```yaml
test:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Run unit tests
      run: npm run test:unit

    - name: Upload coverage
      uses: codecov/codecov-action@v4
      with:
        file: ./coverage/lcov.info
```

### 4.2 통합 테스트

```yaml
test-integration:
  runs-on: ubuntu-latest
  services:
    postgres:
      image: postgres:15
      env:
        POSTGRES_PASSWORD: postgres
      options: >-
        --health-cmd pg_isready
        --health-interval 10s
        --health-timeout 5s
        --health-retries 5
      ports:
        - 5432:5432
    redis:
      image: redis:7
      options: >-
        --health-cmd "redis-cli ping"
        --health-interval 10s
        --health-timeout 5s
        --health-retries 5
      ports:
        - 6379:6379

  steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    - name: Install dependencies
      run: npm ci

    - name: Run integration tests
      run: npm run test:integration
      env:
        DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test
        REDIS_URL: redis://localhost:6379
```

## 5. 품질 체크

### 5.1 Lint

```yaml
lint:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Run ESLint
      run: npm run lint

    - name: Run Prettier check
      run: npm run format:check
```

### 5.2 TypeScript 타입 체크

```yaml
typecheck:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Run TypeScript check
      run: npm run typecheck
```

### 5.3 Security Scan

```yaml
security:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Run npm audit
      run: npm audit --audit-level=high

    - name: Run Snyk security scan
      uses: snyk/actions/node@master
      env:
        SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
```

## 6. 배포 설정

### 6.1 SSH 배포

```yaml
deploy:
  needs: [build, test]
  runs-on: ubuntu-latest
  if: github.ref == 'refs/heads/main'
  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup SSH
      uses: webfactory/ssh-agent@v0.8.0
      with:
        ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

    - name: Add server to known_hosts
      run: |
        ssh-keyscan -H ${{ secrets.SERVER_IP }} >> ~/.ssh/known_hosts

    - name: Deploy to server
      run: |
        ssh ${{ secrets.SERVER_USER }}@${{ secrets.SERVER_IP }} << 'ENDSSH'
          cd /app/backend
          git pull origin main
          npm ci --production
          npm run build
          pm2 restart backend
        ENDSSH
```

### 6.2 Docker Compose 배포

```yaml
deploy:
  needs: [build-docker]
  runs-on: ubuntu-latest
  if: github.ref == 'refs/heads/main'
  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup SSH
      uses: webfactory/ssh-agent@v0.8.0
      with:
        ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

    - name: Add server to known_hosts
      run: |
        ssh-keyscan -H ${{ secrets.SERVER_IP }} >> ~/.ssh/known_hosts

    - name: Deploy with Docker Compose
      run: |
        ssh ${{ secrets.SERVER_USER }}@${{ secrets.SERVER_IP }} << 'ENDSSH'
          cd /app
          docker-compose pull
          docker-compose up -d
          docker image prune -f
        ENDSSH
```

### 6.3 Kubernetes 배포

```yaml
deploy-k8s:
  needs: [build-docker]
  runs-on: ubuntu-latest
  if: github.ref == 'refs/heads/main'
  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up kubectl
      uses: azure/setup-kubectl@v4
      with:
        version: 'v1.28.0'

    - name: Configure kubeconfig
      run: |
        mkdir -p $HOME/.kube
        echo "${{ secrets.KUBE_CONFIG }}" | base64 -d > $HOME/.kube/config
        chmod 600 $HOME/.kube/config

    - name: Update Kubernetes deployment
      run: |
        kubectl set image deployment/backend-deployment \
          backend=myapp/backend:${{ github.sha }}

    - name: Wait for rollout
      run: |
        kubectl rollout status deployment/backend-deployment
```

## 7. 환경 분리

### 7.1 다중 환경 배포

```yaml
deploy-staging:
  needs: [build]
  runs-on: ubuntu-latest
  if: github.ref == 'refs/heads/develop'
  environment:
    name: staging
    url: https://staging-api.example.com
  steps:
    # ... 스테이징 배포 스텝

deploy-production:
  needs: [build, test]
  runs-on: ubuntu-latest
  if: github.ref == 'refs/heads/main'
  environment:
    name: production
    url: https://api.example.com
  steps:
    # ... 프로덕션 배포 스텝
```

### 7.2 환경 변수 관리

```yaml
deploy:
  runs-on: ubuntu-latest
  steps:
    - name: Deploy to production
      run: |
        echo "Deploying to production"
        # 환경 변수 사용
        DATABASE_URL=${{ secrets.PROD_DATABASE_URL }}
        REDIS_URL=${{ secrets.PROD_REDIS_URL }}
        JWT_SECRET=${{ secrets.PROD_JWT_SECRET }}
      env:
        DATABASE_URL: ${{ secrets.PROD_DATABASE_URL }}
        REDIS_URL: ${{ secrets.PROD_REDIS_URL }}
        JWT_SECRET: ${{ secrets.PROD_JWT_SECRET }}
```

## 8. 알림 설정

### 8.1 Slack 알림

```yaml
notify-slack:
  needs: [deploy]
  runs-on: ubuntu-latest
  if: always()
  steps:
    - name: Send Slack notification
      uses: 8398a7/action-slack@v3
      with:
        status: ${{ job.status }}
        text: |
          Deployment ${{ job.status }}
          Branch: ${{ github.ref }}
          Commit: ${{ github.sha }}
        webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
      if: always()
```

### 8.2 이메일 알림

```yaml
notify-email:
  needs: [deploy]
  runs-on: ubuntu-latest
  if: failure()
  steps:
    - name: Send email notification
      uses: dawidd6/action-send-mail@v3
      with:
        server_address: smtp.gmail.com
        server_port: 465
        username: ${{ secrets.EMAIL_USERNAME }}
        password: ${{ secrets.EMAIL_PASSWORD }}
        subject: Deployment failed
        body: Deployment failed for commit ${{ github.sha }}
        to: ${{ secrets.NOTIFICATION_EMAIL }}
        from: CI/CD Bot
```

## 9. 성능 최적화

### 9.1 캐싱

```yaml
build:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'  # npm 캐싱

    - name: Cache node modules
      uses: actions/cache@v4
      with:
        path: node_modules
        key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
        restore-keys: |
          ${{ runner.os }}-node-

    - name: Install dependencies
      run: npm ci
```

### 9.2 병렬 실행

```yaml
jobs:
  lint:
    runs-on: ubuntu-latest
    steps: [...]

  test-unit:
    runs-on: ubuntu-latest
    steps: [...]

  test-integration:
    runs-on: ubuntu-latest
    steps: [...]

  build:
    needs: [lint, test-unit, test-integration]
    runs-on: ubuntu-latest
    steps: [...]
```

## 10. 실전 팁

### 1. Secrets 관리

```bash
# ✅ 좋음: GitHub Secrets 사용
${{ secrets.DATABASE_URL }}

# ❌ 나쁨: 하드코딩
password: "my-secret-password"
```

### 2. 의존성 캐싱

```yaml
# ✅ 좋음: 캐싱 활용
- uses: actions/setup-node@v4
  with:
    node-version: '20'
    cache: 'npm'

- name: Cache node modules
  uses: actions/cache@v4
  with:
    path: node_modules
    key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
```

### 3. 멱티 스테이지 빌드

```yaml
build:
  strategy:
    matrix:
      node-version: [18, 20]
      os: [ubuntu-latest, windows-latest]
  runs-on: ${{ matrix.os }}
  steps:
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: ${{ matrix.node-version }}
```

### 4. 조건부 실행

```yaml
deploy:
  needs: [build, test]
  runs-on: ubuntu-latest
  # main 브랜치에서만 실행
  if: github.ref == 'refs/heads/main'
  steps:
    - name: Deploy
      run: echo "Deploying..."
```

### 5. 재시도 전략

```yaml
deploy:
  runs-on: ubuntu-latest
  steps:
    - name: Deploy with retry
      uses: nick-fields/retry-action@v2
      with:
        timeout_minutes: 10
        max_attempts: 3
        retry_on: error
        command: ./deploy.sh
```

## 결론

CI/CD 파이프라인은 개발 프로세스를 자동화하여 더 빠르고 안정적으로 배포할 수 있게 합니다. GitHub Actions를 사용하여 효율적인 파이프라인을 구축할 수 있습니다.

**핵심 체크리스트:**

- :white_check_mark: 자동화된 빌드 및 테스트
- :white_check_mark: 품질 체크 (Lint, 타입 체크)
- :white_check_mark: 보안 스캔
- :white_check_mark: 자동 배포
- :white_check_mark: 환경 분리 (스테이징/프로덕션)
- :white_check_mark: 알림 설정
- :white_check_mark: 캐싱으로 속도 최적화

**참고 자료:**
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [CI/CD Best Practices](https://martinfowler.com/articles/continuousIntegration.html)
- [GitHub Actions Examples](https://github.com/actions/starter-workflows)
